{"version":3,"file":"share.js","sourceRoot":"","sources":["../../../../src/cli/commands/theme/share.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,UAAU,EAAC,MAAM,gBAAgB,CAAA;AACzC,OAAO,EAAC,gBAAgB,EAAC,MAAM,gCAAgC,CAAA;AAC/D,OAAO,YAAY,MAAM,kCAAkC,CAAA;AAC3D,OAAO,EAAC,QAAQ,EAAC,MAAM,4BAA4B,CAAA;AACnD,OAAO,EAAC,KAAK,EAAC,MAAM,aAAa,CAAA;AACjC,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAA;AACrD,OAAO,EAAC,yBAAyB,EAAC,MAAM,+BAA+B,CAAA;AAEvE,MAAqB,KAAM,SAAQ,YAAY;IAsB7C,KAAK,CAAC,GAAG;QACP,MAAM,EAAC,KAAK,EAAC,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,EAAK,CAAC,CAAA;QACvC,MAAM,WAAW,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,EAAE,EAAC,YAAY,EAAE,EAAK,CAAC,SAAS,EAAC,CAAC,CAAA;QAEjF,MAAM,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,YAAY,GAAG,MAAM,yBAAyB,CAAC,KAAK,EAAE,KAAK,CAAC,QAAQ,CAAC,CAAA;QAE3E,MAAM,QAAQ,CAAC,CAAC,OAAO,EAAE,OAAO,EAAE,KAAK,CAAC,IAAI,EAAE,GAAG,WAAW,CAAC,EAAE,EAAC,KAAK,EAAE,UAAU,EAAE,YAAY,CAAC,KAAK,EAAC,CAAC,CAAA;IACzG,CAAC;;;AA7BM,aAAO,GAAG,+FAA+F,AAAlG,CAAkG;AAEzG,6BAAuB,GAAG;;yNAEsL,AAFzL,CAEyL;AAEhN,iBAAW,GAAG,EAAI,CAAC,0BAA0B,EAAE,AAApC,CAAoC;AAE/C,WAAK,GAAG;IACb,GAAG,WAAW;IACd,GAAG,UAAU;IACb,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC;QACnB,MAAM,EAAE,IAAI;QACZ,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,yFAAyF;QACtG,GAAG,EAAE,oBAAoB;KAC1B,CAAC;CACH,AATW,CASX;AAEM,eAAS,GAAG,CAAC,OAAO,CAAC,AAAZ,CAAY;eApBT,KAAK","sourcesContent":["import {themeFlags} from '../../flags.js'\nimport {ensureThemeStore} from '../../utilities/theme-store.js'\nimport ThemeCommand from '../../utilities/theme-command.js'\nimport {execCLI2} from '@shopify/cli-kit/node/ruby'\nimport {Flags} from '@oclif/core'\nimport {globalFlags} from '@shopify/cli-kit/node/cli'\nimport {ensureAuthenticatedThemes} from '@shopify/cli-kit/node/session'\n\nexport default class Share extends ThemeCommand {\n  static summary = 'Creates a shareable, unpublished, and new theme on your theme library with a randomized name.'\n\n  static descriptionWithMarkdown = `Uploads your theme as a new, unpublished theme in your theme library. The theme is given a randomized name.\n\n  This command returns a [preview link](https://help.shopify.com/manual/online-store/themes/adding-themes?shpxid=cee12a89-AA22-4AD3-38C8-91C8FC0E1FB0#share-a-theme-preview-with-others) that you can share with others.`\n\n  static description = this.descriptionWithoutMarkdown()\n\n  static flags = {\n    ...globalFlags,\n    ...themeFlags,\n    force: Flags.boolean({\n      hidden: true,\n      char: 'f',\n      description: 'Proceed without confirmation, if current directory does not seem to be theme directory.',\n      env: 'SHOPIFY_FLAG_FORCE',\n    }),\n  }\n\n  static cli2Flags = ['force']\n\n  async run(): Promise<void> {\n    const {flags} = await this.parse(Share)\n    const flagsToPass = this.passThroughFlags(flags, {allowedFlags: Share.cli2Flags})\n\n    const store = ensureThemeStore(flags)\n    const adminSession = await ensureAuthenticatedThemes(store, flags.password)\n\n    await execCLI2(['theme', 'share', flags.path, ...flagsToPass], {store, adminToken: adminSession.token})\n  }\n}\n"]}