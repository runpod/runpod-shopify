{"version":3,"file":"delete.js","sourceRoot":"","sources":["../../../../src/cli/commands/theme/delete.ts"],"names":[],"mappings":";AAAA,OAAO,EAAC,gBAAgB,EAAC,MAAM,gCAAgC,CAAA;AAC/D,OAAO,YAAY,MAAM,kCAAkC,CAAA;AAC3D,OAAO,EAAC,UAAU,EAAC,MAAM,gBAAgB,CAAA;AACzC,OAAO,EAAC,YAAY,EAAE,2BAA2B,EAAC,MAAM,0BAA0B,CAAA;AAClF,OAAO,EAAC,KAAK,EAAC,MAAM,aAAa,CAAA;AACjC,OAAO,EAAC,WAAW,EAAC,MAAM,2BAA2B,CAAA;AACrD,OAAO,EAAC,yBAAyB,EAAC,MAAM,+BAA+B,CAAA;AAEvE,MAAqB,MAAO,SAAQ,YAAY;IA0C9C,KAAK,CAAC,GAAG;QACP,MAAM,EAAC,KAAK,EAAE,IAAI,EAAC,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,EAAM,CAAC,CAAA;QAC9C,MAAM,EAAC,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAC,GAAG,KAAK,CAAA;QACnD,MAAM,MAAM,GAAG,CAAC,GAAG,IAAI,EAAE,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC,CAAC,CAAA;QAE1C,MAAM,KAAK,GAAG,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACrC,MAAM,YAAY,GAAG,MAAM,yBAAyB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;QAErE,MAAM,iBAAiB,GAAG,IAAI,CAAC,MAAM,GAAG,CAAC,CAAA;QACzC,IAAI,iBAAiB,EAAE;YACrB,2BAA2B,CAAC,IAAI,CAAC,CAAA;SAClC;QAED,MAAM,YAAY,CAAC,YAAY,EAAE;YAC/B,WAAW,EAAE,KAAK,CAAC,UAAU,CAAC;YAC9B,WAAW;YACX,MAAM;YACN,KAAK;SACN,CAAC,CAAA;IACJ,CAAC;;;AA5DM,cAAO,GAAG,8EAA8E,AAAjF,CAAiF;AAExF,8BAAuB,GAAG;;;;2JAIwH,AAJ3H,CAI2H;AAElJ,kBAAW,GAAG,EAAI,CAAC,0BAA0B,EAAE,AAApC,CAAoC;AAEtD,gDAAgD;AACzC,aAAM,GAAG,KAAK,AAAR,CAAQ;AAEd,YAAK,GAAG;IACb,GAAG,WAAW;IACd,QAAQ,EAAE,UAAU,CAAC,QAAQ;IAC7B,WAAW,EAAE,KAAK,CAAC,OAAO,CAAC;QACzB,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,gCAAgC;QAC7C,GAAG,EAAE,0BAA0B;KAChC,CAAC;IACF,UAAU,EAAE,KAAK,CAAC,OAAO,CAAC;QACxB,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,kDAAkD;QAC/D,GAAG,EAAE,uBAAuB;KAC7B,CAAC;IACF,KAAK,EAAE,KAAK,CAAC,OAAO,CAAC;QACnB,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,oBAAoB;QACjC,GAAG,EAAE,oBAAoB;KAC1B,CAAC;IACF,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC;QAClB,IAAI,EAAE,GAAG;QACT,WAAW,EAAE,uCAAuC;QACpD,GAAG,EAAE,uBAAuB;QAC5B,QAAQ,EAAE,IAAI;KACf,CAAC;IACF,KAAK,EAAE,UAAU,CAAC,KAAK;IACvB,WAAW,EAAE,UAAU,CAAC,WAAW;CACpC,AA1BW,CA0BX;eAxCkB,MAAM","sourcesContent":["import {ensureThemeStore} from '../../utilities/theme-store.js'\nimport ThemeCommand from '../../utilities/theme-command.js'\nimport {themeFlags} from '../../flags.js'\nimport {deleteThemes, renderDeprecatedArgsWarning} from '../../services/delete.js'\nimport {Flags} from '@oclif/core'\nimport {globalFlags} from '@shopify/cli-kit/node/cli'\nimport {ensureAuthenticatedThemes} from '@shopify/cli-kit/node/session'\n\nexport default class Delete extends ThemeCommand {\n  static summary = \"Delete remote themes from the connected store. This command can't be undone.\"\n\n  static descriptionWithMarkdown = `Deletes a theme from your store.\n\n  You can specify multiple themes by ID. If no theme is specified, then you're prompted to select the theme that you want to delete from the list of themes in your store.\n\n  You're asked to confirm that you want to delete the specified themes before they are deleted. You can skip this confirmation using the \\`--force\\` flag.`\n\n  static description = this.descriptionWithoutMarkdown()\n\n  // Accept any number of args without naming them\n  static strict = false\n\n  static flags = {\n    ...globalFlags,\n    password: themeFlags.password,\n    development: Flags.boolean({\n      char: 'd',\n      description: 'Delete your development theme.',\n      env: 'SHOPIFY_FLAG_DEVELOPMENT',\n    }),\n    'show-all': Flags.boolean({\n      char: 'a',\n      description: 'Include others development themes in theme list.',\n      env: 'SHOPIFY_FLAG_SHOW_ALL',\n    }),\n    force: Flags.boolean({\n      char: 'f',\n      description: 'Skip confirmation.',\n      env: 'SHOPIFY_FLAG_FORCE',\n    }),\n    theme: Flags.string({\n      char: 't',\n      description: 'Theme ID or name of the remote theme.',\n      env: 'SHOPIFY_FLAG_THEME_ID',\n      multiple: true,\n    }),\n    store: themeFlags.store,\n    environment: themeFlags.environment,\n  }\n\n  async run(): Promise<void> {\n    const {flags, argv} = await this.parse(Delete)\n    const {development, force, password, theme} = flags\n    const themes = [...argv, ...(theme ?? [])]\n\n    const store = ensureThemeStore(flags)\n    const adminSession = await ensureAuthenticatedThemes(store, password)\n\n    const hasDeprecatedArgs = argv.length > 0\n    if (hasDeprecatedArgs) {\n      renderDeprecatedArgsWarning(argv)\n    }\n\n    await deleteThemes(adminSession, {\n      selectTheme: flags['show-all'],\n      development,\n      themes,\n      force,\n    })\n  }\n}\n"]}