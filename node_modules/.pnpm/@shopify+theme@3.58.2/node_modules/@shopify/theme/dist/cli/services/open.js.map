{"version":3,"file":"open.js","sourceRoot":"","sources":["../../../src/cli/services/open.ts"],"names":[],"mappings":"AAAA,OAAO,EAAC,iBAAiB,EAAC,MAAM,gCAAgC,CAAA;AAChE,OAAO,EAAC,cAAc,EAAC,MAAM,0BAA0B,CAAA;AACvD,OAAO,EAAC,uBAAuB,EAAC,MAAM,2CAA2C,CAAA;AACjF,OAAO,EAAC,cAAc,EAAE,eAAe,EAAC,MAAM,mCAAmC,CAAA;AACjF,OAAO,EAAC,OAAO,EAAC,MAAM,8BAA8B,CAAA;AACpD,OAAO,EAAC,UAAU,EAAC,MAAM,0BAA0B,CAAA;AAGnD,MAAM,CAAC,KAAK,UAAU,IAAI,CACxB,YAA0B,EAC1B,OAA0F;IAE1F,MAAM,uBAAuB,GAAG,IAAI,uBAAuB,CAAC,YAAY,CAAC,CAAA;IACzE,MAAM,gBAAgB,GAAG,CACvB,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,uBAAuB,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC,uBAAuB,CAAC,KAAK,EAAE,CAAC,CAC/F,EAAE,EAAE,CAAA;IACL,MAAM,KAAK,GAAG,MAAM,iBAAiB,CAAC,YAAY,EAAE;QAClD,MAAM,EAAE,wBAAwB;QAChC,MAAM,EAAE;YACN,IAAI,EAAE,OAAO,CAAC,IAAI;YAClB,KAAK,EAAE,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,GAAG,gBAAgB,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK;SACnE;KACF,CAAC,CAAA;IAEF,MAAM,UAAU,GAAG,eAAe,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;IACvD,MAAM,SAAS,GAAG,cAAc,CAAC,KAAK,EAAE,YAAY,CAAC,CAAA;IAErD,UAAU,CAAC;QACT,IAAI,EAAE;YACJ,+BAA+B;YAC/B,GAAG,cAAc,CAAC,KAAK,CAAC;YACxB,MAAM;YACN;gBACE,IAAI,EAAE;oBACJ,KAAK,EAAE;wBACL,EAAC,IAAI,EAAE,EAAC,KAAK,EAAE,oBAAoB,EAAE,GAAG,EAAE,UAAU,EAAC,EAAC;wBACtD,EAAC,IAAI,EAAE,EAAC,KAAK,EAAE,0CAA0C,EAAE,GAAG,EAAE,SAAS,EAAC,EAAC;qBAC5E;iBACF;aACF;SACF;KACF,CAAC,CAAA;IAEF,IAAI,OAAO,CAAC,MAAM,EAAE;QAClB,MAAM,OAAO,CAAC,SAAS,CAAC,CAAA;KACzB;SAAM;QACL,MAAM,OAAO,CAAC,UAAU,CAAC,CAAA;KAC1B;AACH,CAAC","sourcesContent":["import {findOrSelectTheme} from '../utilities/theme-selector.js'\nimport {themeComponent} from '../utilities/theme-ui.js'\nimport {DevelopmentThemeManager} from '../utilities/development-theme-manager.js'\nimport {themeEditorUrl, themePreviewUrl} from '@shopify/cli-kit/node/themes/urls'\nimport {openURL} from '@shopify/cli-kit/node/system'\nimport {renderInfo} from '@shopify/cli-kit/node/ui'\nimport {AdminSession} from '@shopify/cli-kit/node/session'\n\nexport async function open(\n  adminSession: AdminSession,\n  options: {development: boolean; live: boolean; editor: boolean; theme: string | undefined},\n) {\n  const developmentThemeManager = new DevelopmentThemeManager(adminSession)\n  const developmentTheme = (\n    await (options.development ? developmentThemeManager.find() : developmentThemeManager.fetch())\n  )?.id\n  const theme = await findOrSelectTheme(adminSession, {\n    header: 'Select a theme to open',\n    filter: {\n      live: options.live,\n      theme: options.development ? `${developmentTheme}` : options.theme,\n    },\n  })\n\n  const previewUrl = themePreviewUrl(theme, adminSession)\n  const editorUrl = themeEditorUrl(theme, adminSession)\n\n  renderInfo({\n    body: [\n      `Preview information for theme`,\n      ...themeComponent(theme),\n      '\\n\\n',\n      {\n        list: {\n          items: [\n            {link: {label: 'Preview your theme', url: previewUrl}},\n            {link: {label: 'Customize your theme at the theme editor', url: editorUrl}},\n          ],\n        },\n      },\n    ],\n  })\n\n  if (options.editor) {\n    await openURL(editorUrl)\n  } else {\n    await openURL(previewUrl)\n  }\n}\n"]}